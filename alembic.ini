# ============================================
# Alembic Configuration for single database
# ============================================

[alembic]
# Path to migration scripts
script_location = alembic

# Template for migration file names
# file_template = %%(rev)s_%%(slug)s

# Timezone for Alembic (used internally for revision filenames)
# Leave blank here, handle timezone in env.py if needed
# timezone = UTC

# --------------------------------------------
# DATABASE URL â€” Must be synchronous (psycopg2)
# --------------------------------------------
# CRITICAL UPDATE: Switched from the Pooler endpoint ('-pooler') to the
# Direct endpoint to solve connection authentication issues with synchronous tools.
# Must NOT use asyncpg here.
sqlalchemy.url = postgresql+psycopg2://neondb_owner:PASSWORD@ep-bitter-mouse-a14xm2gk.ap-southeast-1.aws.neon.tech/neondb?sslmode=require
# --------------------------------------------
# Logging configuration
# --------------------------------------------
[loggers]
keys = root,sqlalchemy,alembic

[handlers]
keys = console

[formatters]
keys = generic

[logger_root]
level = WARN
handlers = console

[logger_sqlalchemy]
level = WARN
handlers =
qualname = sqlalchemy.engine

[logger_alembic]
level = INFO
handlers =
qualname = alembic

[handler_console]
class = StreamHandler
args = (sys.stderr,)
level = NOTSET
formatter = generic

[formatter_generic]
format = %(levelname)-5.5s [%(name)s] %(message)s